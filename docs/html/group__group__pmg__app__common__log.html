<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PmgAppCommon Middleware Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PmgAppCommon Middleware Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__pmg__app__common__log.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">Logging</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>Include cy_app_debug.h, cy_app_uart_debug.h, and cy_app_flash_log.h to get access to all the functions and declarations used by the debug module. </p>
<p>See the Configuration Considerations section to start using the debug module.</p>
<p>The debug module is used for logging the failures and events while the firmware is running on the PMG1 device. The debug module supports two modes of logging. <br />
 a. Logging through UART: <br />
 In this mode, the log messages are transmitted over the UART interface. The events and failures are prioritized based on different log levels. The log level can be changed at compile time using CY_APP_DEBUG_LEVEL macro. <br />
 b. Storing into internal flash: <br />
 This feature will enable logging the failure details into internal flash. Two types of information are stored into the internal flash. They are static information and dynamic information.</p>
<p>Static information stores the number of occurrences of predefined failures. Dynamic information stores last few failure details into internal flash.</p>
<h1><a class="anchor" id="section_pmg_app_common_log_config"></a>
configuration considerations</h1>
<p>Do the following steps to enable debug module for the application.</p>
<p>Step 1: Header file inclusion <br />
Include the required header files to get access to the debug module. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;cy_app_uart_debug.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;cy_app_debug.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;cy_app_flash_log.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;cy_app_flash_config.h&quot;</span></div></div><!-- fragment --><p> Step 2: Initialize the debug module <br />
 The debug module can be initialized by calling the API <a class="el" href="group__group__pmg__app__common__log__functions.html#gafafaeaaab032aead113ae0b95c9222f4" title="This function is used for the initialization of the debug module. ">Cy_App_Debug_Init()</a>. This API will internally initialize UART and flash logging. </p><div class="fragment"><div class="line"><span class="preprocessor">#if CY_APP_DEBUG_ENABLE  </span></div><div class="line">    <a class="code" href="group__group__pmg__app__common__log__enums.html#gaedd4e8e9dfaeb575a1df37723dc67e59">cy_en_debug_status_t</a> debugStat;  </div><div class="line">    debugStat = <a class="code" href="group__group__pmg__app__common__log__functions.html#gafafaeaaab032aead113ae0b95c9222f4">Cy_App_Debug_Init</a>(CYBSP_UART_HW, &amp;CYBSP_UART_config, (uint32_t)CY_APP_SYS_FLASH_LOG_ADDR, (uint32_t)CY_APP_SYS_FLASH_LOG_BACKUP_ADDR, FLASH_LOG_TIMER_ID, FLASH_LOG_WRITE_DEFER_TIME, &amp;gl_TimerCtx);</div><div class="line">    <span class="keywordflow">if</span>(debugStat != <a class="code" href="group__group__pmg__app__common__log__enums.html#ggaedd4e8e9dfaeb575a1df37723dc67e59a6344bb6c4bc946b276611413ae141dc6">CY_APP_DEBUG_STAT_SUCCESS</a>)</div><div class="line">    {</div><div class="line">        CY_ASSERT(0);</div><div class="line">    }</div><div class="line"><span class="preprocessor">#endif </span><span class="comment">/* CY_APP_DEBUG_ENABLE */</span><span class="preprocessor"></span></div></div><!-- fragment --><p> Step 3: Logging events/failures <br />
 Use the Macro CY_APP_DEBUG_LOG to log an event or failure. The following piece of code is used to log power cycle event. </p><div class="fragment"><div class="line">    <a class="code" href="group__group__pmg__app__common__log__macros.html#ga461dc8771a35addfa3f2c880393ecbc4">CY_APP_DEBUG_LOG</a>(0, <a class="code" href="group__group__pmg__app__common__log__enums.html#gga84d0d37ae0e54730bcbbceb755a0603ea0bb36ef36f654f6ed054cc740821e2fc">CY_APP_DEBUG_POWER_CYCLE</a>, NULL, 0, <a class="code" href="group__group__pmg__app__common__log__enums.html#ggaa30bb0b2387a42f063fd7917629f2399a766190b82e292fe895c1b615807a4f4d">CY_APP_DEBUG_LOGLEVEL_CRITICAL</a>, <span class="keyword">true</span>);</div></div><!-- fragment --><p> Step 4: Run the flash log task <br />
 Run the flash log task in the main loop by calling the API <a class="el" href="group__group__pmg__app__common__log__functions.html#gac1c4d00c6927f45b0aa6c75a5c103f26" title="This function performs tasks associated with flash logging. ">Cy_App_Debug_FlashTask()</a>. This API will internally check for pending flash writes, defer the writes and finally write the logs to internal flash. It also handles the backup flash log writes. </p><div class="fragment"><div class="line">    <span class="keywordflow">for</span>(;;)</div><div class="line">    {</div><div class="line"><span class="preprocessor">#if (CY_APP_FLASH_LOG_ENABLE &amp;&amp; CY_APP_DEBUG_ENABLE)</span></div><div class="line">        <a class="code" href="group__group__pmg__app__common__log__functions.html#gac1c4d00c6927f45b0aa6c75a5c103f26">Cy_App_Debug_FlashTask</a>();</div><div class="line"><span class="preprocessor">#endif </span><span class="comment">/* (CY_APP_FLASH_LOG_ENABLE &amp;&amp; CY_APP_DEBUG_ENABLE) */</span><span class="preprocessor"></span></div><div class="line">    }</div></div><!-- fragment --><p> Step 5: Retrieving flash logs <br />
 The logs stored in internal flash can be retrieved by using the API <a class="el" href="group__group__pmg__app__common__log__functions.html#gab5c0e172fa6c5c71b96e469974ae7545" title="This function will retrieve the logs stored in internal flash. ">Cy_App_Debug_FlashReadLogs()</a>. </p><div class="fragment"><div class="line"><span class="preprocessor">#if CY_APP_FLASH_LOG_ENABLE</span></div><div class="line">    <a class="code" href="group__group__pmg__app__common__log__data__structures.html#structcy__stc__app__flash__log__t">cy_stc_app_flash_log_t</a> *flash_log_ptr;</div><div class="line">    flash_log_ptr = <a class="code" href="group__group__pmg__app__common__log__functions.html#gab5c0e172fa6c5c71b96e469974ae7545">Cy_App_Debug_FlashReadLogs</a>();</div><div class="line"><span class="preprocessor">#endif </span><span class="comment">/* CY_APP_FLASH_LOG_ENABLE */</span><span class="preprocessor"></span></div></div><!-- fragment --><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__pmg__app__common__log__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__log__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__pmg__app__common__log__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__log__enums.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__pmg__app__common__log__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__log__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__pmg__app__common__log__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__log__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>PmgAppCommon Middleware Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
