<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PmgAppCommon Middleware Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PmgAppCommon Middleware Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__pmg__app__common__system__flash__functions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">flash<div class="ingroups"><a class="el" href="group__group__pmg__app__common__system.html">System</a> &raquo; <a class="el" href="group__group__pmg__app__common__system__functions.html">Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga76785d1398fa074ab2863e68ce2fa52a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__system__flash__functions.html#ga76785d1398fa074ab2863e68ce2fa52a">Cy_App_Flash_EnterMode</a> (bool is_enable, <a class="el" href="group__group__pmg__app__common__system__flash__enums.html#ga8720e6c9a3ccf7f7501513d0d7403898">cy_en_flash_interface_t</a> mode, bool data_in_place)</td></tr>
<tr class="memdesc:ga76785d1398fa074ab2863e68ce2fa52a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle ENTER_FLASHING_MODE command.  <a href="#ga76785d1398fa074ab2863e68ce2fa52a">More...</a><br /></td></tr>
<tr class="separator:ga76785d1398fa074ab2863e68ce2fa52a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga746781faf244770c136a45f88290d571"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__system__flash__functions.html#ga746781faf244770c136a45f88290d571">Cy_App_Flash_AccessGetStatus</a> (uint8_t modes)</td></tr>
<tr class="memdesc:ga746781faf244770c136a45f88290d571"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether flashing mode has been entered.  <a href="#ga746781faf244770c136a45f88290d571">More...</a><br /></td></tr>
<tr class="separator:ga746781faf244770c136a45f88290d571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga451e8adefe016a232287484cd1485b6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__system__flash__functions.html#ga451e8adefe016a232287484cd1485b6a">Cy_App_Flash_SetAccessLimits</a> (uint16_t start_row, uint16_t last_row, uint16_t md_row, uint16_t bl_last_row)</td></tr>
<tr class="memdesc:ga451e8adefe016a232287484cd1485b6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set limits to the flash rows that can be accessed.  <a href="#ga451e8adefe016a232287484cd1485b6a">More...</a><br /></td></tr>
<tr class="separator:ga451e8adefe016a232287484cd1485b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2553b0ff7a6aecd69537108f58982833"><td class="memItemLeft" align="right" valign="top">cy_en_app_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__system__flash__functions.html#ga2553b0ff7a6aecd69537108f58982833">Cy_App_Flash_RowClear</a> (uint16_t row_num)</td></tr>
<tr class="memdesc:ga2553b0ff7a6aecd69537108f58982833"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase the contents of the specified flash row.  <a href="#ga2553b0ff7a6aecd69537108f58982833">More...</a><br /></td></tr>
<tr class="separator:ga2553b0ff7a6aecd69537108f58982833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5fa65cb2b1f4455ceaa558da9f3eaab1"><td class="memItemLeft" align="right" valign="top">cy_en_app_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__system__flash__functions.html#ga5fa65cb2b1f4455ceaa558da9f3eaab1">Cy_App_Flash_RowWrite</a> (uint16_t row_num, uint8_t *data, <a class="el" href="group__group__pmg__app__common__system__flash__data__structures.html#ga9ff46d47887b9e7892d0f4e9e9b4629c">cy_app_flash_cbk_t</a> cbk)</td></tr>
<tr class="memdesc:ga5fa65cb2b1f4455ceaa558da9f3eaab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the given data to the specified flash row.  <a href="#ga5fa65cb2b1f4455ceaa558da9f3eaab1">More...</a><br /></td></tr>
<tr class="separator:ga5fa65cb2b1f4455ceaa558da9f3eaab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae38304d0741860e687b4ce8fa60d977a"><td class="memItemLeft" align="right" valign="top">cy_en_app_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__system__flash__functions.html#gae38304d0741860e687b4ce8fa60d977a">Cy_App_Flash_RowRead</a> (uint16_t row_num, uint8_t *data)</td></tr>
<tr class="memdesc:gae38304d0741860e687b4ce8fa60d977a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the contents of the specified flash row.  <a href="#gae38304d0741860e687b4ce8fa60d977a">More...</a><br /></td></tr>
<tr class="separator:gae38304d0741860e687b4ce8fa60d977a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c2afd6831bcb985760e471bc37186be"><td class="memItemLeft" align="right" valign="top">cy_en_app_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pmg__app__common__system__flash__functions.html#ga6c2afd6831bcb985760e471bc37186be">Cy_App_Flash_SetAppPriority</a> (<a class="el" href="group__group__pmg__app__common__system__flash__enums.html#ga3688db058974e337ee4c16e4d66ccf81">cy_en_flash_app_priority_t</a> app_priority)</td></tr>
<tr class="memdesc:ga6c2afd6831bcb985760e471bc37186be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the app boot priority flag.  <a href="#ga6c2afd6831bcb985760e471bc37186be">More...</a><br /></td></tr>
<tr class="separator:ga6c2afd6831bcb985760e471bc37186be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga76785d1398fa074ab2863e68ce2fa52a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76785d1398fa074ab2863e68ce2fa52a">&#9670;&nbsp;</a></span>Cy_App_Flash_EnterMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cy_App_Flash_EnterMode </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__pmg__app__common__system__flash__enums.html#ga8720e6c9a3ccf7f7501513d0d7403898">cy_en_flash_interface_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>data_in_place</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle ENTER_FLASHING_MODE command. </p>
<p>This function notifies the PMG1 stack that flash read/write is being enabled by the application. By default, PMG1 firmware disallows all flash read/write operations. Flash access is only allowed after flashing mode has been explicitly enabled through user command.</p>
<p>Note: FW update interface is allowed to enable flashing mode only once in one session. This is to ensure that multiple flashing interfaces are not active simultaneously. Each FW update interface is expected to take care of this. Once flash access is complete, this API should be used to exit FW Update interface.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_enable</td><td>Enable/disable flashing mode </td></tr>
    <tr><td class="paramname">mode</td><td>Flash update interface to be used </td></tr>
    <tr><td class="paramname">data_in_place</td><td>Specifies whether the flash write data buffer can be used in place as SROM API parameter buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="ga746781faf244770c136a45f88290d571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga746781faf244770c136a45f88290d571">&#9670;&nbsp;</a></span>Cy_App_Flash_AccessGetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Cy_App_Flash_AccessGetStatus </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>modes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether flashing mode has been entered. </p>
<p>This function checks whether flashing mode has currently been entered by a different interface</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">modes</td><td>Bitmap containing flashing interfaces to be checked</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if flashing mode has been entered using any of the interfaces listed in modes, false otherwise. </dd></dl>

</div>
</div>
<a id="ga451e8adefe016a232287484cd1485b6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga451e8adefe016a232287484cd1485b6a">&#9670;&nbsp;</a></span>Cy_App_Flash_SetAccessLimits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cy_App_Flash_SetAccessLimits </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>start_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>last_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>md_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bl_last_row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set limits to the flash rows that can be accessed. </p>
<p>The PMG1 stack has been designed to support fail-safe firmware upgrades using a pair of firmware binaries that can mutually update each other. This scheme can only be robust if the currently active firmware binary can effectively protect itself by not allowing access to any of its own flash rows.</p>
<p>This function is used to specify the list of flash rows that can safely be accessed by the currently active firmware binary. This function should only be used with parameters derived based on the binary locations identified from firmware metadata. Incorrect usage of this API can cause the device to stop responding during a flash update operation.</p>
<p>This API must be invoked as part of initialization before the <a class="el" href="group__group__pmg__app__common__system__flash__functions.html#ga5fa65cb2b1f4455ceaa558da9f3eaab1" title="Write the given data to the specified flash row. ">Cy_App_Flash_RowWrite()</a> and <a class="el" href="group__group__pmg__app__common__system__flash__functions.html#gae38304d0741860e687b4ce8fa60d977a" title="Read the contents of the specified flash row. ">Cy_App_Flash_RowRead()</a> functions can be called. By default, no flash row can be read or written to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start_row</td><td>The lowest row number that can be written </td></tr>
    <tr><td class="paramname">last_row</td><td>The highest row number that can be written </td></tr>
    <tr><td class="paramname">md_row</td><td>Row containing metadata for the alternate firmware </td></tr>
    <tr><td class="paramname">bl_last_row</td><td>Last bootloader row. Rows above this can be read</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="ga2553b0ff7a6aecd69537108f58982833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2553b0ff7a6aecd69537108f58982833">&#9670;&nbsp;</a></span>Cy_App_Flash_RowClear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_en_app_status_t Cy_App_Flash_RowClear </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>row_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erase the contents of the specified flash row. </p>
<p>This API erases the contents of the specified flash row by filling it with zeroes. Please note that this API will only work if flashing mode is enabled and the selected row is within the range of write enabled rows.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">row_num</td><td>Row number to be erased</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status of row erase operation </dd></dl>

</div>
</div>
<a id="ga5fa65cb2b1f4455ceaa558da9f3eaab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5fa65cb2b1f4455ceaa558da9f3eaab1">&#9670;&nbsp;</a></span>Cy_App_Flash_RowWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_en_app_status_t Cy_App_Flash_RowWrite </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>row_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__pmg__app__common__system__flash__data__structures.html#ga9ff46d47887b9e7892d0f4e9e9b4629c">cy_app_flash_cbk_t</a>&#160;</td>
          <td class="paramname"><em>cbk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write the given data to the specified flash row. </p>
<p>This API handles the flash write row operation. The contents from the data buffer is written to the row_num flash row. The access rules for the flash row is as same as it is for the Cy_App_Flash_RowClear API.</p>
<p>For non-blocking write row operation, the API returns as soon as the row update is started. The stack takes care of executing all of the steps across multiple resume interrupts; and the callback is called at the end of the process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">row_num</td><td>Flash row to be updated </td></tr>
    <tr><td class="paramname">data</td><td>Buffer containing data to be written to the flash row </td></tr>
    <tr><td class="paramname">cbk</td><td>Callback function to be called at the end of non-blocking flash write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status of the flash write. CY_APP_STAT_SUCCESS or appropriate error code </dd></dl>

</div>
</div>
<a id="gae38304d0741860e687b4ce8fa60d977a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae38304d0741860e687b4ce8fa60d977a">&#9670;&nbsp;</a></span>Cy_App_Flash_RowRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_en_app_status_t Cy_App_Flash_RowRead </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>row_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the contents of the specified flash row. </p>
<p>This API handles the flash read row operation. The contents of the flash row are copied into the specified data buffer, if flashing mode has been entered and the row_num is part of the readable range of memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">row_num</td><td>Flash row to be read </td></tr>
    <tr><td class="paramname">data</td><td>Buffer to read the flash row content into</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status of the flash read. CY_APP_STAT_SUCCESS or appropriate error code </dd></dl>

</div>
</div>
<a id="ga6c2afd6831bcb985760e471bc37186be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6c2afd6831bcb985760e471bc37186be">&#9670;&nbsp;</a></span>Cy_App_Flash_SetAppPriority()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_en_app_status_t Cy_App_Flash_SetAppPriority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group__pmg__app__common__system__flash__enums.html#ga3688db058974e337ee4c16e4d66ccf81">cy_en_flash_app_priority_t</a>&#160;</td>
          <td class="paramname"><em>app_priority</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the app boot priority flag. </p>
<p>This function is used to set the app priority field to override the default FW selection algorithm</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">app_priority</td><td>Desired boot priority setting</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status code of the priority update </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>PmgAppCommon Middleware Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
